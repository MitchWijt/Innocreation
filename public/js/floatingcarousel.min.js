!function(e,t){"function"==typeof define&&define.amd?define([],t(e)):"object"==typeof exports?module.exports=t(e):e.floatingCarousel=t(e)}("undefined"!=typeof global?global:this.window||this.global,function(e){var t,o=!!document.querySelector&&!!e.addEventListener,n=window.jQuery,l={autoScroll:!1,autoScrollDirection:"left",autoScrollSpeed:1e4,initClass:"floatingCarouselContainer",intervalRate:16,looped:!0,scrollerAlignment:"horizontal",scrollerOffset:0,scrollSpeed:"medium",beforeCreateFunction:null,afterCreateFunction:null,enableTouchEvents:!0,touchOverflowHidden:!0,reverseOnTouch:!0},r=function(e,t,o){if("[object Object]"===Object.prototype.toString.call(e))for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(o,e[n],n,e);else{n=0;for(var l=e.length;n<l;n++)t.call(o,e[n],n,e)}},i=function(e,t){if(e.length)r(e,function(e){for(var o in t)e.style[o]=t[o]});else for(var o in t)e.style[o]=t[o];return e},a=function(e,t){var o=Element.prototype;return(o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||function(e){return-1!==[].indexOf.call(document.querySelectorAll(e),this)}).call(e,t)},c=function(e,t){return Array.prototype.filter.call(e.children,function(e){return a(e,t)})},s=function(e){e=e.getBoundingClientRect();var t=window.pageYOffset||document.documentElement.scrollTop,o=window.pageXOffset||document.documentElement.scrollLeft;return{top:parseInt(e.top)+t,left:parseInt(e.left)+o}},u=function(e,f){var p={},d=e||[];if("string"==typeof d&&(d=document.querySelectorAll(d)),1<d.length){var h=[];return r(d,function(e){1===e.nodeType&&h.push(u(e,f))}),h}d=d[0]||d;var y,v,g,m,w,L,C,S,x,b,T,M,A,H,I=0,O=!1,E=0,F=0,k=0,j=function(e,t){return"left"==e?O&&H.reverseOnTouch?A<t:t<A:O&&H.reverseOnTouch?t<A:A<t},q=function(){0!=H.looped&&(g&&(clearInterval(g),g=0),S=S||("vertical"!=H.scrollerAlignment.toLowerCase()?parseInt(C[0].style.left):parseInt(C[0].style.top)),H.autoScrollSpeed=H.autoScrollSpeed<1e3?1e3:H.autoScrollSpeed,H.autoScrollSpeed/y<L?M=Math.round(L/(H.autoScrollSpeed/y)):(M=1,y=Math.round(H.autoScrollSpeed/L)),g=setInterval(function(){switch(H.autoScrollDirection.toLowerCase()){case"right":case"down":E<S+M?I=(S=0)==I?1:0:S+=M;break;default:S-M<-(E-L)?(S=L,I=0==I?1:0):S-=M}"vertical"!=H.scrollerAlignment.toLowerCase()?(C[I].style.left=S+"px",C[0==I?1:0].style.left=S-E+"px"):(C[I].style.top=S+"px",C[0==I?1:0].style.top=S-E+"px")},y))},P=function(e){if(t&&(clearInterval(t),t=0,e&&0!=H.looped&&1!=H.autoScroll&&1<M)){e=0;for(var o=M;1<o;o--)e+=o;o="vertical"!=H.scrollerAlignment.toLowerCase()?w.x:w.y,j("left",o)?E<S+e&&(S-=E,I=0==I?1:0):S-e<-(E-L)&&(S+=E,I=0==I?1:0),S=j("left",o)?S+e:S-e,"vertical"!=H.scrollerAlignment.toLowerCase()?(i(C,{transition:"left 300ms ease-out"}),setTimeout(function(){C[I].style.left=S+"px",C[0==I?1:0].style.left=S-E+"px"},50)):(i(C,{transition:"top 300ms ease-out"}),setTimeout(function(){C[I].style.top=S+"px",C[0==I?1:0].style.top=S-E+"px"},50)),setTimeout(function(){i(C,{transition:""})},350)}},V=function(){O=!0,H.touchOverflowHidden&&(document.body.style.overflow="hidden"),g&&(clearInterval(g),g=0),A="vertical"!=H.scrollerAlignment.toLowerCase()?Math.round(s(v).left+v.offsetWidth/2):Math.round(s(v).top+v.offsetHeight/2),S=S||("vertical"!=H.scrollerAlignment.toLowerCase()?parseInt(C[0].style.left):parseInt(C[0].style.top)),t=setInterval(function(){try{var e="vertical"!=H.scrollerAlignment.toLowerCase()?w.x:w.y}catch(e){return}var t=L/2,o=e<A?A-e:e-A;M=o<Math.ceil(t/100*30)?1:o<Math.ceil(t/100*50)?2*x:o<Math.ceil(t/100*70)?3*x:o<Math.ceil(t/100*90)?4*x:6*x,j("left",e)?0<S+M&&0==H.looped?S=0:E<S+M?I=(S=0)==I?1:0:S+=M:j("right",e)&&(S-M<-(E-L)?0==H.looped?S=-(E-L):(S=L,I=0==I?1:0):S-=M),"vertical"!=H.scrollerAlignment.toLowerCase()?(C[I].style.left=S+"px",C[0==I?1:0].style.left=S-E+"px"):(C[I].style.top=S+"px",C[0==I?1:0].style.top=S-E+"px")},y)},X=function(){H.touchOverflowHidden&&(document.body.style.overflow=""),P(!0),1==H.autoScroll&&q()},Y=function(e){!function(e){var t={x:0,y:0};if(e.changedTouches)e=e.changedTouches[0],t.x=e.pageX,t.y=e.pageY;else if(e.pageX||e.pageY)t.x=e.pageX,t.y=e.pageY;else{var o=document.documentElement,n=document.body;t.x=e.clientX+((o.scrollLeft||n.scrollLeft)-(o.clientLeft||0)),t.y=e.clientY+((o.scrollTop||n.scrollTop)-(o.clientTop||0))}w=t}(e)};return p.destroy=function(){H&&(p.pause(),1<d.children.length&&C[1].parentNode.removeChild(C[1]),r(C[0].children,function(e){e.removeAttribute("style")}),a(C[0],"div")?d.innerHTML=C[0].innerHTML:C[0].removeAttribute("style"),d.removeAttribute("style"),d.classList.remove(H.initClass),S=H=null,E=0)},p.update=function(e){p.destroy(),p.init(e)},p.play=function(){m||(H.enableTouchEvents&&(d.addEventListener("touchstart",V),d.addEventListener("touchend",X),d.addEventListener("touchmove",Y)),!0===H.autoScroll&&q(),m=!0)},p.pause=function(){m&&(P(),g&&(clearInterval(g),g=0),t&&(clearInterval(t),t=0),H.enableTouchEvents&&(d.removeEventListener("touchstart",V),d.removeEventListener("touchend",X),d.removeEventListener("touchmove",Y)),m=!1)},p.init=function(e){if(d.length<1)return!1;if(v=d,o){switch(a=e||{},s={},r(t=l,function(e,o){s[o]=t[o]}),r(a,function(e,t){s[t]=a[t]}),null!=(H=s).beforeCreateFunction&&"function"==typeof H.beforeCreateFunction&&H.beforeCreateFunction.call(d),d.classList.add(H.initClass),y=H.intervalRate,v.style.paddingLeft="0",v.style.paddingRight="0",L=v.offsetWidth,d.children[0].nodeName.toLowerCase()){case"div":v.innerHTML="<div>"+v.innerHTML+"</div>",v.innerHTML+=v.innerHTML,C=c(d,"div"),b=c(C[0],"div");break;case"ul":v.innerHTML+=v.innerHTML,C=d.querySelectorAll("ul"),b=c(C[0],"li");break;case"ol":v.innerHTML+=v.innerHTML,C=d.querySelectorAll("ol"),b=c(C[0],"li");break;default:return console.log("unable to initialise scroller - please ensure contents are either in a UL, an OL or in DIVs"),!1}switch(i(b,{float:"left"}),H.scrollSpeed.toLowerCase()){case"slow":x=1;break;case"fast":x=4;break;default:x=2}r(b,function(e){var t=parseInt(window.getComputedStyle(e).getPropertyValue("margin-top")),o=parseInt(window.getComputedStyle(e).getPropertyValue("margin-bottom")),n=parseInt(window.getComputedStyle(e).getPropertyValue("margin-left")),l=parseInt(window.getComputedStyle(e).getPropertyValue("margin-right"));t=e.offsetHeight+t+o,n=e.offsetWidth+n+l,"vertical"!=H.scrollerAlignment.toLowerCase()?(E+=n,e.offsetHeight>F&&(F=t)):(E+=t,e.offsetWidth>k&&(k=n))}),"vertical"!=H.scrollerAlignment.toLowerCase()?v.style.height=F+"px":(v.style.width=k+"px",v.style.height=0<v.offsetHeight?v.offsetHeight+"px":v.parentNode.offsetHeight+"px",L=v.offsetHeight),L<E?(T=Math.round(E/100*H.scrollerOffset)-Math.round(L/2),E-L<T&&(T=E-L),v.style.position="relative",r(C,function(e){e.style.position="absolute","vertical"!=H.scrollerAlignment.toLowerCase()?i(e,{top:0,width:E+"px"}):i(e,{left:0,height:E+"px",width:k+"px"}),r(e.children,function(e){e.style.float="left",e.style.position="static"})}),"vertical"!=H.scrollerAlignment.toLowerCase()?(C[0].style.left=0<T?"-"+T+"px":"0",1==H.looped?C[1].style.left=C[0].offsetLeft-E+"px":i(C[1],{display:"none",top:"-1000px"})):(C[0].style.top=0<T?"-"+T+"px":"0",1==H.looped?C[1].style.top=C[0].offsetTop-E+"px":i(C[1],{display:"none",top:"-1000px"})),p.play(),null!=H.afterCreateFunction&&"function"==typeof H.afterCreateFunction&&H.afterCreateFunction.call(d)):(C[1].parentNode.removeChild(C[1]),null!=H.afterCreateFunction&&n.isFunction(H.afterCreateFunction)&&H.afterCreateFunction.call(d))}var t,a,s},p.init(f),p};return n&&(n.fn.floatingCarousel=function(e){return new u(this,e)}),u});