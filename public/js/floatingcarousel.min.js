!function(e,t){"function"==typeof define&&define.amd?define([],t(e)):"object"==typeof exports?module.exports=t(e):e.floatingCarousel=t(e)}("undefined"!=typeof global?global:this.window||this.global,function(e){var F,k=!!document.querySelector&&!!e.addEventListener,j=window.jQuery,q={autoScroll:!1,autoScrollDirection:"left",autoScrollSpeed:1e4,initClass:"floatingCarouselContainer",intervalRate:16,looped:!0,scrollerAlignment:"horizontal",scrollerOffset:0,scrollSpeed:"medium",beforeCreateFunction:null,afterCreateFunction:null,enableTouchEvents:!0,touchOverflowHidden:!0,reverseOnTouch:!0},P=function(e,t,o){if("[object Object]"===Object.prototype.toString.call(e))for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(o,e[n],n,e);else{n=0;for(var l=e.length;n<l;n++)t.call(o,e[n],n,e)}},V=function(e,o){if(e.length)P(e,function(e){for(var t in o)e.style[t]=o[t]});else for(var t in o)e.style[t]=o[t];return e},X=function(e,t){var o=Element.prototype;return(o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||function(e){return-1!==[].indexOf.call(document.querySelectorAll(e),this)}).call(e,t)},Y=function(e,t){return Array.prototype.filter.call(e.children,function(e){return X(e,t)})},N=function(e){e=e.getBoundingClientRect();var t=window.pageYOffset||document.documentElement.scrollTop,o=window.pageXOffset||document.documentElement.scrollLeft;return{top:parseInt(e.top)+t,left:parseInt(e.left)+o}},R=function(e,t){var r={},i=e||[];if("string"==typeof i&&(i=document.querySelectorAll(i)),1<i.length){var o=[];return P(i,function(e){1===e.nodeType&&o.push(R(e,t))}),o}i=i[0]||i;var a,c,n,l,s,u,f,p,d,h,y,v,g,m,w=0,L=!1,C=0,S=0,x=0,b=function(e,t){return"left"==e?L&&m.reverseOnTouch?g<t:t<g:L&&m.reverseOnTouch?t<g:g<t},T=function(){0!=m.looped&&(n&&(clearInterval(n),n=0),p=p||("vertical"!=m.scrollerAlignment.toLowerCase()?parseInt(f[0].style.left):parseInt(f[0].style.top)),m.autoScrollSpeed=m.autoScrollSpeed<1e3?1e3:m.autoScrollSpeed,m.autoScrollSpeed/a<u?v=Math.round(u/(m.autoScrollSpeed/a)):(v=1,a=Math.round(m.autoScrollSpeed/u)),n=setInterval(function(){switch(m.autoScrollDirection.toLowerCase()){case"right":case"down":C<p+v?w=(p=0)==w?1:0:p+=v;break;default:p-v<-(C-u)?(p=u,w=0==w?1:0):p-=v}"vertical"!=m.scrollerAlignment.toLowerCase()?(f[w].style.left=p+"px",f[0==w?1:0].style.left=p-C+"px"):(f[w].style.top=p+"px",f[0==w?1:0].style.top=p-C+"px")},a))},M=function(){n&&(clearInterval(n),n=0),g="vertical"!=m.scrollerAlignment.toLowerCase()?Math.round(N(c).left+c.offsetWidth/2):Math.round(N(c).top+c.offsetHeight/2),p=p||("vertical"!=m.scrollerAlignment.toLowerCase()?parseInt(f[0].style.left):parseInt(f[0].style.top)),F=setInterval(function(){try{var e="vertical"!=m.scrollerAlignment.toLowerCase()?s.x:s.y}catch(e){return}var t=u/2,o=e<g?g-e:e-g;v=o<Math.ceil(t/100*30)?1:o<Math.ceil(t/100*50)?2*d:o<Math.ceil(t/100*70)?3*d:o<Math.ceil(t/100*90)?4*d:6*d,b("left",e)?0<p+v&&0==m.looped?p=0:C<p+v?w=(p=0)==w?1:0:p+=v:b("right",e)&&(p-v<-(C-u)?0==m.looped?p=-(C-u):(p=u,w=0==w?1:0):p-=v),"vertical"!=m.scrollerAlignment.toLowerCase()?(f[w].style.left=p+"px",f[0==w?1:0].style.left=p-C+"px"):(f[w].style.top=p+"px",f[0==w?1:0].style.top=p-C+"px")},a)},A=function(e){if(F&&(clearInterval(F),F=0,e&&0!=m.looped&&1!=m.autoScroll&&1<v)){e=0;for(var t=v;1<t;t--)e+=t;t="vertical"!=m.scrollerAlignment.toLowerCase()?s.x:s.y,b("left",t)?C<p+e&&(p-=C,w=0==w?1:0):p-e<-(C-u)&&(p+=C,w=0==w?1:0),p=b("left",t)?p+e:p-e,"vertical"!=m.scrollerAlignment.toLowerCase()?(V(f,{transition:"left 300ms ease-out"}),setTimeout(function(){f[w].style.left=p+"px",f[0==w?1:0].style.left=p-C+"px"},50)):(V(f,{transition:"top 300ms ease-out"}),setTimeout(function(){f[w].style.top=p+"px",f[0==w?1:0].style.top=p-C+"px"},50)),setTimeout(function(){V(f,{transition:""})},350)}},H=function(e){var t={x:0,y:0};if(e.changedTouches)e=e.changedTouches[0],t.x=e.pageX,t.y=e.pageY;else if(e.pageX||e.pageY)t.x=e.pageX,t.y=e.pageY;else{var o=document.documentElement,n=document.body;t.x=e.clientX+((o.scrollLeft||n.scrollLeft)-(o.clientLeft||0)),t.y=e.clientY+((o.scrollTop||n.scrollTop)-(o.clientTop||0))}s=t},I=function(){L=!0,m.touchOverflowHidden&&(document.body.style.overflow="hidden"),M()},O=function(){m.touchOverflowHidden&&(document.body.style.overflow=""),A(!0),1==m.autoScroll&&T()},E=function(e){H(e)};return r.destroy=function(){m&&(r.pause(),1<i.children.length&&f[1].parentNode.removeChild(f[1]),P(f[0].children,function(e){e.removeAttribute("style")}),X(f[0],"div")?i.innerHTML=f[0].innerHTML:f[0].removeAttribute("style"),i.removeAttribute("style"),i.classList.remove(m.initClass),p=m=null,C=0)},r.update=function(e){r.destroy(),r.init(e)},r.play=function(){l||(m.enableTouchEvents&&(i.addEventListener("touchstart",I),i.addEventListener("touchend",O),i.addEventListener("touchmove",E)),!0===m.autoScroll&&T(),l=!0)},r.pause=function(){l&&(A(),n&&(clearInterval(n),n=0),F&&(clearInterval(F),F=0),m.enableTouchEvents&&(i.removeEventListener("touchstart",I),i.removeEventListener("touchend",O),i.removeEventListener("touchmove",E)),l=!1)},r.init=function(e){if(i.length<1)return!1;if(c=i,k){switch(n=e||{},l={},P(o=q,function(e,t){l[t]=o[t]}),P(n,function(e,t){l[t]=n[t]}),null!=(m=l).beforeCreateFunction&&"function"==typeof m.beforeCreateFunction&&m.beforeCreateFunction.call(i),i.classList.add(m.initClass),a=m.intervalRate,c.style.paddingLeft="0",c.style.paddingRight="0",u=c.offsetWidth,i.children[0].nodeName.toLowerCase()){case"div":c.innerHTML="<div>"+c.innerHTML+"</div>",c.innerHTML+=c.innerHTML,f=Y(i,"div"),h=Y(f[0],"div");break;case"ul":c.innerHTML+=c.innerHTML,f=i.querySelectorAll("ul"),h=Y(f[0],"li");break;case"ol":c.innerHTML+=c.innerHTML,f=i.querySelectorAll("ol"),h=Y(f[0],"li");break;default:return console.log("unable to initialise scroller - please ensure contents are either in a UL, an OL or in DIVs"),!1}switch(V(h,{float:"left"}),m.scrollSpeed.toLowerCase()){case"slow":d=1;break;case"fast":d=4;break;default:d=2}P(h,function(e){var t=parseInt(window.getComputedStyle(e).getPropertyValue("margin-top")),o=parseInt(window.getComputedStyle(e).getPropertyValue("margin-bottom")),n=parseInt(window.getComputedStyle(e).getPropertyValue("margin-left")),l=parseInt(window.getComputedStyle(e).getPropertyValue("margin-right"));t=e.offsetHeight+t+o,n=e.offsetWidth+n+l,"vertical"!=m.scrollerAlignment.toLowerCase()?(C+=n,e.offsetHeight>S&&(S=t)):(C+=t,e.offsetWidth>x&&(x=n))}),"vertical"!=m.scrollerAlignment.toLowerCase()?c.style.height=S+"px":(c.style.width=x+"px",c.style.height=0<c.offsetHeight?c.offsetHeight+"px":c.parentNode.offsetHeight+"px",u=c.offsetHeight),u<C?(y=Math.round(C/100*m.scrollerOffset)-Math.round(u/2),C-u<y&&(y=C-u),c.style.overflow="hidden",c.style.position="relative",P(f,function(e){e.style.position="absolute","vertical"!=m.scrollerAlignment.toLowerCase()?V(e,{top:0,width:C+"px"}):V(e,{left:0,height:C+"px",width:x+"px"}),P(e.children,function(e){e.style.float="left",e.style.position="static"})}),"vertical"!=m.scrollerAlignment.toLowerCase()?(f[0].style.left=0<y?"-"+y+"px":"0",1==m.looped?f[1].style.left=f[0].offsetLeft-C+"px":V(f[1],{display:"none",top:"-1000px"})):(f[0].style.top=0<y?"-"+y+"px":"0",1==m.looped?f[1].style.top=f[0].offsetTop-C+"px":V(f[1],{display:"none",top:"-1000px"})),r.play(),null!=m.afterCreateFunction&&"function"==typeof m.afterCreateFunction&&m.afterCreateFunction.call(i)):(f[1].parentNode.removeChild(f[1]),null!=m.afterCreateFunction&&j.isFunction(m.afterCreateFunction)&&m.afterCreateFunction.call(i))}var o,n,l},r.init(t),r};return j&&(j.fn.floatingCarousel=function(e){return new R(this,e)}),R});